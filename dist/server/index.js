'use strict';

require('source-map-support/register');

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _server = require('soundworks/server');

var _BarrelExperience = require('./BarrelExperience');

var _BarrelExperience2 = _interopRequireDefault(_BarrelExperience);

var _PlayerExperience = require('./PlayerExperience');

var _PlayerExperience2 = _interopRequireDefault(_PlayerExperience);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// enable sourcemaps in node
var configName = process.env.ENV || 'default';
var configPath = _path2.default.join(__dirname, 'config', configName);
var config = null;

try {
  config = require(configPath).default;
} catch (err) {
  console.error('Invalid ENV "' + configName + '", file "' + configPath + '.js" not found');
  process.exit(1);
}

process.env.NODE_ENV = config.env;

_server.server.init(config);

_server.server.setClientConfigDefinition(function (clientType, config, httpRequest) {
  return {
    clientType: clientType,
    env: config.env,
    socketIO: config.socketIO,
    appName: config.appName,
    version: config.version,
    defaultType: config.defaultClient,
    assetsDomain: config.assetsDomain
  };
});

var sharedParams = _server.server.require('shared-params');
sharedParams.addText('numPlayers', 'num players', 0, ['controller']);
sharedParams.addText('temperature', 'temperature', 0, ['controller']);
sharedParams.addEnum('scene', 'scene', ['off', 'co-909', 'collective-loops', 'co-mix', 'wwry-r'], 'co-909');
sharedParams.addNumber('outputGain0', 'output 0 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain1', 'output 1 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain2', 'output 2 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain3', 'output 3 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain4', 'output 4 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain5', 'output 5 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain6', 'output 6 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('outputGain7', 'output 7 gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('wooferGain', 'woofer gain', -40, 20, 1, 0, ['controller', 'barrel']);
sharedParams.addNumber('wooferCutoff', 'woofer cutoff', 50, 500, 5, 250, ['controller', 'barrel']);
sharedParams.addNumber('barrelDelay', 'barrel delay', 0, 0.1, 0.02, 0.001, ['controller', 'barrel']);
sharedParams.addNumber('tempo', 'tempo', 60, 240, 5, 120, ['player', 'controller']);
sharedParams.addTrigger('clear', 'clear players');
sharedParams.addTrigger('reload', 'reload players');

var controllerExperience = new _server.ControllerExperience('controller');
var barrelExperience = new _BarrelExperience2.default('barrel');
var playerExperience = new _PlayerExperience2.default('player');

_server.server.start();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvbmZpZ05hbWUiLCJwcm9jZXNzIiwiZW52IiwiRU5WIiwiY29uZmlnUGF0aCIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiY29uZmlnIiwicmVxdWlyZSIsImRlZmF1bHQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJleGl0IiwiTk9ERV9FTlYiLCJzZXJ2ZXIiLCJpbml0Iiwic2V0Q2xpZW50Q29uZmlnRGVmaW5pdGlvbiIsImNsaWVudFR5cGUiLCJodHRwUmVxdWVzdCIsInNvY2tldElPIiwiYXBwTmFtZSIsInZlcnNpb24iLCJkZWZhdWx0VHlwZSIsImRlZmF1bHRDbGllbnQiLCJhc3NldHNEb21haW4iLCJzaGFyZWRQYXJhbXMiLCJhZGRUZXh0IiwiYWRkRW51bSIsImFkZE51bWJlciIsImFkZFRyaWdnZXIiLCJjb250cm9sbGVyRXhwZXJpZW5jZSIsIkNvbnRyb2xsZXJFeHBlcmllbmNlIiwiYmFycmVsRXhwZXJpZW5jZSIsIkJhcnJlbEV4cGVyaWVuY2UiLCJwbGF5ZXJFeHBlcmllbmNlIiwiUGxheWVyRXhwZXJpZW5jZSIsInN0YXJ0Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBSnNDO0FBTXRDLElBQU1BLGFBQWFDLFFBQVFDLEdBQVIsQ0FBWUMsR0FBWixJQUFtQixTQUF0QztBQUNBLElBQU1DLGFBQWFDLGVBQUtDLElBQUwsQ0FBVUMsU0FBVixFQUFxQixRQUFyQixFQUErQlAsVUFBL0IsQ0FBbkI7QUFDQSxJQUFJUSxTQUFTLElBQWI7O0FBRUEsSUFBSTtBQUNGQSxXQUFTQyxRQUFRTCxVQUFSLEVBQW9CTSxPQUE3QjtBQUNELENBRkQsQ0FFRSxPQUFNQyxHQUFOLEVBQVc7QUFDWEMsVUFBUUMsS0FBUixtQkFBOEJiLFVBQTlCLGlCQUFvREksVUFBcEQ7QUFDQUgsVUFBUWEsSUFBUixDQUFhLENBQWI7QUFDRDs7QUFFRGIsUUFBUUMsR0FBUixDQUFZYSxRQUFaLEdBQXVCUCxPQUFPTixHQUE5Qjs7QUFFQWMsZUFBT0MsSUFBUCxDQUFZVCxNQUFaOztBQUVBUSxlQUFPRSx5QkFBUCxDQUFpQyxVQUFDQyxVQUFELEVBQWFYLE1BQWIsRUFBcUJZLFdBQXJCLEVBQXFDO0FBQ3BFLFNBQU87QUFDTEQsZ0JBQVlBLFVBRFA7QUFFTGpCLFNBQUtNLE9BQU9OLEdBRlA7QUFHTG1CLGNBQVViLE9BQU9hLFFBSFo7QUFJTEMsYUFBU2QsT0FBT2MsT0FKWDtBQUtMQyxhQUFTZixPQUFPZSxPQUxYO0FBTUxDLGlCQUFhaEIsT0FBT2lCLGFBTmY7QUFPTEMsa0JBQWNsQixPQUFPa0I7QUFQaEIsR0FBUDtBQVNELENBVkQ7O0FBWUEsSUFBTUMsZUFBZVgsZUFBT1AsT0FBUCxDQUFlLGVBQWYsQ0FBckI7QUFDQWtCLGFBQWFDLE9BQWIsQ0FBcUIsWUFBckIsRUFBbUMsYUFBbkMsRUFBa0QsQ0FBbEQsRUFBcUQsQ0FBQyxZQUFELENBQXJEO0FBQ0FELGFBQWFDLE9BQWIsQ0FBcUIsYUFBckIsRUFBb0MsYUFBcEMsRUFBbUQsQ0FBbkQsRUFBc0QsQ0FBQyxZQUFELENBQXREO0FBQ0FELGFBQWFFLE9BQWIsQ0FBcUIsT0FBckIsRUFBOEIsT0FBOUIsRUFBdUMsQ0FBQyxLQUFELEVBQVEsUUFBUixFQUFrQixrQkFBbEIsRUFBc0MsUUFBdEMsRUFBZ0QsUUFBaEQsQ0FBdkMsRUFBa0csUUFBbEc7QUFDQUYsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixhQUF2QixFQUFzQyxlQUF0QyxFQUF1RCxDQUFDLEVBQXhELEVBQTRELEVBQTVELEVBQWdFLENBQWhFLEVBQW1FLENBQW5FLEVBQXNFLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBdEU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixZQUF2QixFQUFxQyxhQUFyQyxFQUFvRCxDQUFDLEVBQXJELEVBQXlELEVBQXpELEVBQTZELENBQTdELEVBQWdFLENBQWhFLEVBQW1FLENBQUMsWUFBRCxFQUFlLFFBQWYsQ0FBbkU7QUFDQUgsYUFBYUcsU0FBYixDQUF1QixjQUF2QixFQUF1QyxlQUF2QyxFQUF3RCxFQUF4RCxFQUE0RCxHQUE1RCxFQUFpRSxDQUFqRSxFQUFvRSxHQUFwRSxFQUF5RSxDQUFDLFlBQUQsRUFBZSxRQUFmLENBQXpFO0FBQ0FILGFBQWFHLFNBQWIsQ0FBdUIsYUFBdkIsRUFBc0MsY0FBdEMsRUFBc0QsQ0FBdEQsRUFBeUQsR0FBekQsRUFBOEQsSUFBOUQsRUFBb0UsS0FBcEUsRUFBMkUsQ0FBQyxZQUFELEVBQWUsUUFBZixDQUEzRTtBQUNBSCxhQUFhRyxTQUFiLENBQXVCLE9BQXZCLEVBQWdDLE9BQWhDLEVBQXlDLEVBQXpDLEVBQTZDLEdBQTdDLEVBQWtELENBQWxELEVBQXFELEdBQXJELEVBQTBELENBQUMsUUFBRCxFQUFXLFlBQVgsQ0FBMUQ7QUFDQUgsYUFBYUksVUFBYixDQUF3QixPQUF4QixFQUFpQyxlQUFqQztBQUNBSixhQUFhSSxVQUFiLENBQXdCLFFBQXhCLEVBQWtDLGdCQUFsQzs7QUFFQSxJQUFNQyx1QkFBdUIsSUFBSUMsNEJBQUosQ0FBeUIsWUFBekIsQ0FBN0I7QUFDQSxJQUFNQyxtQkFBbUIsSUFBSUMsMEJBQUosQ0FBcUIsUUFBckIsQ0FBekI7QUFDQSxJQUFNQyxtQkFBbUIsSUFBSUMsMEJBQUosQ0FBcUIsUUFBckIsQ0FBekI7O0FBRUFyQixlQUFPc0IsS0FBUCIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJzsgLy8gZW5hYmxlIHNvdXJjZW1hcHMgaW4gbm9kZVxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBzZXJ2ZXIsIENvbnRyb2xsZXJFeHBlcmllbmNlIH0gZnJvbSAnc291bmR3b3Jrcy9zZXJ2ZXInO1xuaW1wb3J0IEJhcnJlbEV4cGVyaWVuY2UgZnJvbSAnLi9CYXJyZWxFeHBlcmllbmNlJztcbmltcG9ydCBQbGF5ZXJFeHBlcmllbmNlIGZyb20gJy4vUGxheWVyRXhwZXJpZW5jZSc7XG5cbmNvbnN0IGNvbmZpZ05hbWUgPSBwcm9jZXNzLmVudi5FTlYgfHzCoCdkZWZhdWx0JztcbmNvbnN0IGNvbmZpZ1BhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnY29uZmlnJywgY29uZmlnTmFtZSk7XG5sZXQgY29uZmlnID0gbnVsbDtcblxudHJ5IHtcbiAgY29uZmlnID0gcmVxdWlyZShjb25maWdQYXRoKS5kZWZhdWx0O1xufSBjYXRjaChlcnIpIHtcbiAgY29uc29sZS5lcnJvcihgSW52YWxpZCBFTlYgXCIke2NvbmZpZ05hbWV9XCIsIGZpbGUgXCIke2NvbmZpZ1BhdGh9LmpzXCIgbm90IGZvdW5kYCk7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn1cblxucHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBjb25maWcuZW52O1xuXG5zZXJ2ZXIuaW5pdChjb25maWcpO1xuXG5zZXJ2ZXIuc2V0Q2xpZW50Q29uZmlnRGVmaW5pdGlvbigoY2xpZW50VHlwZSwgY29uZmlnLCBodHRwUmVxdWVzdCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGNsaWVudFR5cGU6IGNsaWVudFR5cGUsXG4gICAgZW52OiBjb25maWcuZW52LFxuICAgIHNvY2tldElPOiBjb25maWcuc29ja2V0SU8sXG4gICAgYXBwTmFtZTogY29uZmlnLmFwcE5hbWUsXG4gICAgdmVyc2lvbjogY29uZmlnLnZlcnNpb24sXG4gICAgZGVmYXVsdFR5cGU6IGNvbmZpZy5kZWZhdWx0Q2xpZW50LFxuICAgIGFzc2V0c0RvbWFpbjogY29uZmlnLmFzc2V0c0RvbWFpbixcbiAgfTtcbn0pO1xuXG5jb25zdCBzaGFyZWRQYXJhbXMgPSBzZXJ2ZXIucmVxdWlyZSgnc2hhcmVkLXBhcmFtcycpO1xuc2hhcmVkUGFyYW1zLmFkZFRleHQoJ251bVBsYXllcnMnLCAnbnVtIHBsYXllcnMnLCAwLCBbJ2NvbnRyb2xsZXInXSk7XG5zaGFyZWRQYXJhbXMuYWRkVGV4dCgndGVtcGVyYXR1cmUnLCAndGVtcGVyYXR1cmUnLCAwLCBbJ2NvbnRyb2xsZXInXSk7XG5zaGFyZWRQYXJhbXMuYWRkRW51bSgnc2NlbmUnLCAnc2NlbmUnLCBbJ29mZicsICdjby05MDknLCAnY29sbGVjdGl2ZS1sb29wcycsICdjby1taXgnLCAnd3dyeS1yJ10sICdjby05MDknKTtcbnNoYXJlZFBhcmFtcy5hZGROdW1iZXIoJ291dHB1dEdhaW4wJywgJ291dHB1dCAwIGdhaW4nLCAtNDAsIDIwLCAxLCAwLCBbJ2NvbnRyb2xsZXInLCAnYmFycmVsJ10pO1xuc2hhcmVkUGFyYW1zLmFkZE51bWJlcignb3V0cHV0R2FpbjEnLCAnb3V0cHV0IDEgZ2FpbicsIC00MCwgMjAsIDEsIDAsIFsnY29udHJvbGxlcicsICdiYXJyZWwnXSk7XG5zaGFyZWRQYXJhbXMuYWRkTnVtYmVyKCdvdXRwdXRHYWluMicsICdvdXRwdXQgMiBnYWluJywgLTQwLCAyMCwgMSwgMCwgWydjb250cm9sbGVyJywgJ2JhcnJlbCddKTtcbnNoYXJlZFBhcmFtcy5hZGROdW1iZXIoJ291dHB1dEdhaW4zJywgJ291dHB1dCAzIGdhaW4nLCAtNDAsIDIwLCAxLCAwLCBbJ2NvbnRyb2xsZXInLCAnYmFycmVsJ10pO1xuc2hhcmVkUGFyYW1zLmFkZE51bWJlcignb3V0cHV0R2FpbjQnLCAnb3V0cHV0IDQgZ2FpbicsIC00MCwgMjAsIDEsIDAsIFsnY29udHJvbGxlcicsICdiYXJyZWwnXSk7XG5zaGFyZWRQYXJhbXMuYWRkTnVtYmVyKCdvdXRwdXRHYWluNScsICdvdXRwdXQgNSBnYWluJywgLTQwLCAyMCwgMSwgMCwgWydjb250cm9sbGVyJywgJ2JhcnJlbCddKTtcbnNoYXJlZFBhcmFtcy5hZGROdW1iZXIoJ291dHB1dEdhaW42JywgJ291dHB1dCA2IGdhaW4nLCAtNDAsIDIwLCAxLCAwLCBbJ2NvbnRyb2xsZXInLCAnYmFycmVsJ10pO1xuc2hhcmVkUGFyYW1zLmFkZE51bWJlcignb3V0cHV0R2FpbjcnLCAnb3V0cHV0IDcgZ2FpbicsIC00MCwgMjAsIDEsIDAsIFsnY29udHJvbGxlcicsICdiYXJyZWwnXSk7XG5zaGFyZWRQYXJhbXMuYWRkTnVtYmVyKCd3b29mZXJHYWluJywgJ3dvb2ZlciBnYWluJywgLTQwLCAyMCwgMSwgMCwgWydjb250cm9sbGVyJywgJ2JhcnJlbCddKTtcbnNoYXJlZFBhcmFtcy5hZGROdW1iZXIoJ3dvb2ZlckN1dG9mZicsICd3b29mZXIgY3V0b2ZmJywgNTAsIDUwMCwgNSwgMjUwLCBbJ2NvbnRyb2xsZXInLCAnYmFycmVsJ10pO1xuc2hhcmVkUGFyYW1zLmFkZE51bWJlcignYmFycmVsRGVsYXknLCAnYmFycmVsIGRlbGF5JywgMCwgMC4xLCAwLjAyLCAwLjAwMSwgWydjb250cm9sbGVyJywgJ2JhcnJlbCddKTtcbnNoYXJlZFBhcmFtcy5hZGROdW1iZXIoJ3RlbXBvJywgJ3RlbXBvJywgNjAsIDI0MCwgNSwgMTIwLCBbJ3BsYXllcicsICdjb250cm9sbGVyJ10pO1xuc2hhcmVkUGFyYW1zLmFkZFRyaWdnZXIoJ2NsZWFyJywgJ2NsZWFyIHBsYXllcnMnKTtcbnNoYXJlZFBhcmFtcy5hZGRUcmlnZ2VyKCdyZWxvYWQnLCAncmVsb2FkIHBsYXllcnMnKTtcblxuY29uc3QgY29udHJvbGxlckV4cGVyaWVuY2UgPSBuZXcgQ29udHJvbGxlckV4cGVyaWVuY2UoJ2NvbnRyb2xsZXInKTtcbmNvbnN0IGJhcnJlbEV4cGVyaWVuY2UgPSBuZXcgQmFycmVsRXhwZXJpZW5jZSgnYmFycmVsJyk7XG5jb25zdCBwbGF5ZXJFeHBlcmllbmNlID0gbmV3IFBsYXllckV4cGVyaWVuY2UoJ3BsYXllcicpO1xuXG5zZXJ2ZXIuc3RhcnQoKTtcbiJdfQ==